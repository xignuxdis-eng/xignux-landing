import{r as a,u as y,a as b,j as e,L as o,C as N,b as w}from"./index-_RAjuLbG.js";const k=()=>{const[C,h]=a.useState(null),[l,c]=a.useState(""),[r,i]=a.useState(""),[d,u]=a.useState(""),[m,t]=a.useState(""),[x,g]=a.useState(""),[p,f]=a.useState(!1),v=y();a.useEffect(()=>{(async()=>{const s=await b.getCurrentUser();if(s.success&&s.data){const n=s.data;h(n.id)}else t(s.error||"No se pudo obtener el usuario actual")})()},[]);const j=async s=>{if(s.preventDefault(),t(""),g(""),!r||r.length<6){t("La nueva contraseña debe tener al menos 6 caracteres");return}if(r!==d){t("La confirmación no coincide");return}f(!0);const n=await b.changePassword(l,r);f(!1),n.success?(g("Contraseña actualizada correctamente. Por favor, vuelve a iniciar sesión."),c(""),i(""),u(""),setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),v("/login")},2e3)):t(n.error||"No se pudo actualizar la contraseña")};return e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Cambiar contraseña"}),e.jsxs("form",{onSubmit:j,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña actual"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(o,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",className:"appearance-none relative block w-full pl-10 pr-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"••••••••",value:l,onChange:s=>c(s.target.value)})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ingresa tu contraseña actual para confirmar el cambio."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nueva contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(o,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",className:"appearance-none relative block w-full pl-10 pr-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"••••••••",value:r,onChange:s=>i(s.target.value),required:!0,minLength:6})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar nueva contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(o,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",className:"appearance-none relative block w-full pl-10 pr-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"••••••••",value:d,onChange:s=>u(s.target.value),required:!0})]})]}),m&&e.jsxs("div",{className:"flex items-center p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(N,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-sm text-red-700",children:m})]}),x&&e.jsxs("div",{className:"flex items-center p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(w,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("span",{className:"text-sm text-green-700",children:x})]}),e.jsx("button",{type:"submit",disabled:p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Guardando...":"Guardar nueva contraseña"})]})]})};export{k as default};
//# sourceMappingURL=ChangePassword-lT8W40p9.js.map
